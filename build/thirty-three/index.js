(()=>{"use strict";var e,t={649:()=>{const e=window.wp.blocks,t=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.components,l=window.wp.primitives,a=window.ReactJSXRuntime;var n=(0,a.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(l.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})});const o=window.wp.element,s=(e="")=>e?e.startsWith("0x")?e:e.startsWith("#")?`0x${e.slice(1)}`:`0x${e.replace("#","")}`:"",h=(e="",t="#004100")=>e?e.startsWith("#")?e:e.startsWith("0x")?`#${e.slice(2)}`:`#${e}`:t,d=JSON.parse('{"UU":"create-block/thirty-three"}');(0,e.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:l}){const{imageId:d,imageUrl:c,fileId:x,fileUrl:u,scale:_,rotationX:m,rotationY:p,rotationZ:v,color:y}=e,g=(0,r.useBlockProps)({className:"thirty-three-editor"}),[j,f]=(0,o.useState)(!1);return(0,a.jsxs)("div",{...g,children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.Flex,{align:"center",justify:"space-between",gap:2,children:[(0,a.jsxs)(i.FlexBlock,{children:[(0,a.jsx)("strong",{children:(0,t.__)("3MF block settings","thirty-three")}),(0,a.jsx)("div",{className:"thirty-three-editor__file-subtitle",children:u||(0,t.__)("No 3MF file selected yet","thirty-three")})]}),(0,a.jsx)(i.FlexItem,{children:(0,a.jsx)(i.Button,{icon:n,variant:"secondary",className:"components-dropdown__toggle",onClick:()=>f(!0),children:(0,t.__)("Edit post selection","dynamic-button-react")})})]})}),(0,a.jsx)(i.CardBody,{children:(0,a.jsxs)(i.Flex,{align:"center",gap:2,children:[(0,a.jsx)(i.FlexItem,{children:c?(0,a.jsx)("img",{src:c,alt:(0,t.__)("Selected preview","thirty-three"),style:{width:"96px",height:"auto",borderRadius:"4px"}}):(0,a.jsx)("div",{style:{width:"96px",height:"96px",border:"1px dashed #ddd",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",fontSize:"12px"},children:(0,t.__)("No image","thirty-three")})}),(0,a.jsxs)(i.FlexBlock,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[(0,t.__)("3MF file","thirty-three"),":"]})," ",u||(0,t.__)("Not set","thirty-three")]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[(0,t.__)("Scale","thirty-three"),":"]})," ",Number(null!=_?_:.1).toFixed(2)]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[(0,t.__)("Rotation","thirty-three"),":"]})," ","X ",Number(null!=m?m:0),"° / Y ",Number(null!=p?p:0),"° / Z ",Number(null!=v?v:0),"°"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[(0,t.__)("Colour","thirty-three"),":"]})," ",y||"0x004100"]})]})]})})]}),j&&(0,a.jsx)(i.Modal,{title:(0,t.__)("3MF settings","thirty-three"),onRequestClose:()=>f(!1),shouldCloseOnClickOutside:!1,children:(0,a.jsxs)("div",{style:{display:"grid",gap:"1rem"},children:[(0,a.jsxs)("div",{className:"thirty-three-editor__media-input",children:[(0,a.jsx)("span",{className:"thirty-three-editor__media-label",children:(0,t.__)("Preview image","thirty-three")}),c?(0,a.jsx)("img",{src:c,alt:(0,t.__)("3MF preview","thirty-three"),style:{width:"100%",height:"auto",borderRadius:"4px",marginBottom:"0.5rem"}}):(0,a.jsx)("p",{children:(0,t.__)("No image selected","thirty-three")}),(0,a.jsx)(r.MediaUploadCheck,{children:(0,a.jsx)(r.MediaUpload,{onSelect:e=>{var t,r,i;l({imageId:null!==(t=e?.id)&&void 0!==t?t:null,imageUrl:null!==(r=null!==(i=e?.sizes?.medium?.url)&&void 0!==i?i:e?.url)&&void 0!==r?r:""})},value:null!=d?d:void 0,allowedTypes:["image"],render:({open:e})=>(0,a.jsx)(i.Button,{variant:"secondary",onClick:e,children:d?(0,t.__)("Change image","thirty-three"):(0,t.__)("Select image","thirty-three")})})}),d&&(0,a.jsx)(i.Button,{variant:"link",isDestructive:!0,onClick:()=>l({imageId:null,imageUrl:""}),children:(0,t.__)("Remove image","thirty-three")})]}),(0,a.jsxs)("div",{className:"thirty-three-editor__media-input",children:[(0,a.jsx)("span",{className:"thirty-three-editor__media-label",children:(0,t.__)("3MF file","thirty-three")}),u?(0,a.jsx)("p",{className:"thirty-three-editor__file-path",children:u}):(0,a.jsx)("p",{children:(0,t.__)("No 3MF file selected","thirty-three")}),(0,a.jsx)(r.MediaUploadCheck,{children:(0,a.jsx)(r.MediaUpload,{onSelect:e=>{var t,r;l({fileId:null!==(t=e?.id)&&void 0!==t?t:null,fileUrl:null!==(r=e?.url)&&void 0!==r?r:""})},value:null!=x?x:void 0,render:({open:e})=>(0,a.jsx)(i.Button,{variant:"secondary",onClick:e,children:x?(0,t.__)("Change file","thirty-three"):(0,t.__)("Select 3MF file","thirty-three")})})}),x&&(0,a.jsx)(i.Button,{variant:"link",isDestructive:!0,onClick:()=>l({fileId:null,fileUrl:""}),children:(0,t.__)("Remove file","thirty-three")})]}),(0,a.jsx)(i.RangeControl,{label:(0,t.__)("Scale","thirty-three"),value:Number(null!=_?_:.1),onChange:e=>l({scale:Number(null!=e?e:.1)}),min:.01,max:5,step:.01,help:(0,t.__)("Use 0.01 to 5 for fine control.","thirty-three"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,a.jsx)(i.RangeControl,{label:(0,t.__)("Rotation X (°)","thirty-three"),value:Number(null!=m?m:0),onChange:e=>l({rotationX:Number(null!=e?e:0)}),min:-180,max:180,step:1,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,a.jsx)(i.RangeControl,{label:(0,t.__)("Rotation Y (°)","thirty-three"),value:Number(null!=p?p:0),onChange:e=>l({rotationY:Number(null!=e?e:0)}),min:-180,max:180,step:1,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,a.jsx)(i.RangeControl,{label:(0,t.__)("Rotation Z (°)","thirty-three"),value:Number(null!=v?v:0),onChange:e=>l({rotationZ:Number(null!=e?e:0)}),min:-180,max:180,step:1,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,a.jsxs)("div",{className:"thirty-three-editor__color-input",children:[(0,a.jsx)("span",{className:"thirty-three-editor__media-label",children:(0,t.__)("Colour","thirty-three")}),(0,a.jsx)(i.ColorPicker,{color:h(y),onChangeComplete:e=>{var t;l({color:s(null!==(t=e?.hex)&&void 0!==t?t:e)})},disableAlpha:!0}),(0,a.jsx)(i.TextControl,{label:(0,t.__)("Hex colour (0x format)","thirty-three"),value:null!=y?y:"0x004100",onChange:e=>l({color:s(e)}),help:(0,t.__)("Example: 0xff0000 for pure red.","thirty-three"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]}),(0,a.jsx)(i.Flex,{justify:"flex-end",gap:2,children:(0,a.jsx)(i.Button,{variant:"tertiary",onClick:()=>f(!1),children:(0,t.__)("Close","thirty-three")})})]})})]})},save:function({attributes:e}){const{imageUrl:t="",fileUrl:i="",scale:l=.1,rotationX:n=0,rotationY:o=0,rotationZ:s=0,color:h="0x004100"}=null!=e?e:{},d=r.useBlockProps.save({className:"thirty-three-block","data-image-url":t,"data-file-url":i,"data-scale":l,"data-rotation-x":n,"data-rotation-y":o,"data-rotation-z":s,"data-color":h});return(0,a.jsxs)("div",{...d,children:[(0,a.jsx)("div",{className:"thirty-three-viewport",children:(0,a.jsxs)("div",{className:"thirty-three-placeholder",children:[t?(0,a.jsx)("img",{src:t,alt:"",loading:"lazy"}):(0,a.jsx)("span",{children:"3D preview"}),(0,a.jsx)("div",{className:"thirty-three-loader","aria-hidden":"true",children:(0,a.jsx)("div",{className:"thirty-three-loader__bar"})})]})}),(0,a.jsx)("div",{className:"thirty-three-status",role:"status","aria-live":"polite",children:i?"Loading 3D model…":"No 3MF file selected."})]})}})}},r={};function i(e){var l=r[e];if(void 0!==l)return l.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,r,l,a)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,l,a]=e[d],o=!0,s=0;s<r.length;s++)(!1&a||n>=a)&&Object.keys(i.O).every(e=>i.O[e](r[s]))?r.splice(s--,1):(o=!1,a<n&&(n=a));if(o){e.splice(d--,1);var h=l();void 0!==h&&(t=h)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,l,a]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={657:0,669:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var l,a,[n,o,s]=r,h=0;if(n.some(t=>0!==e[t])){for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(s)var d=s(i)}for(t&&t(r);h<n.length;h++)a=n[h],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},r=globalThis.webpackChunkthirty_three=globalThis.webpackChunkthirty_three||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=i.O(void 0,[669],()=>i(649));l=i.O(l)})();