(()=>{"use strict";var e,t,o={},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return o[e](i,i.exports,n),i.exports}let i;n.m=o,n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,o)=>(n.f[o](e,t),t),[])),n.u=e=>e+".js?ver="+{437:"591209c61890728e6e9a",462:"9cdc3fa36504c5e33821"}[e],n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="thirty-three:",n.l=(o,r,i,a)=>{if(e[o])e[o].push(r);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var p=c[d];if(p.getAttribute("src")==o||p.getAttribute("data-webpack")==t+i){l=p;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=o),e[o]=[r];var h=(t,r)=>{l.onerror=l.onload=null,clearTimeout(u);var n=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(e=>e(r)),t)return t(r)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;globalThis.importScripts&&(e=globalThis.location+"");var t=globalThis.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"})(),(()=>{var e={48:0};n.f.j=(t,o)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((o,n)=>r=e[t]=[o,n]);o.push(r[2]=i);var a=n.p+n.u(t),l=new Error;n.l(a,o=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,r[1](l)}},"chunk-"+t,t)}};var t=(t,o)=>{var r,i,[a,l,s]=o,c=0;if(a.some(t=>0!==e[t])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);s&&s(n)}for(t&&t(o);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},o=globalThis.webpackChunkthirty_three=globalThis.webpackChunkthirty_three||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();const a=(e=0,t)=>t.MathUtils.degToRad(Number.isFinite(e)?e:Number(e)||0),l=e=>{const t=(e||"0x004100").toString().replace(/^#/,"").replace(/^0x/,""),o=parseInt(t,16);return Number.isFinite(o)?o:16640},s=(e,t,o)=>Math.min(Math.max(e,t),o),c=async(e,t={})=>{if(!e)return{destroy:()=>{},update:()=>{}};return((e,t,o={})=>{const{THREE:r,ThreeMFLoader:n}=t,{interactive:i=!0,logTransforms:c=!0}=o,d=e.dataset||{},p=e.querySelector(".thirty-three-viewport"),h=e.querySelector(".thirty-three-placeholder"),u=e.querySelector(".thirty-three-status"),m=d.fileUrl||"",g=e=>{u&&(u.textContent=e)};if(!p)return()=>{};const v=d.imageUrl||"";let w=s(Number(d.scale)||1,.1,2),y={x:a(Number(d.rotationX)||0,r),y:a(Number(d.rotationY)||0,r),z:a(Number(d.rotationZ)||0,r)},b=l(d.color);if(v&&h?.querySelector("img")&&(h.querySelector("img").src=v),!m)return g("No 3MF file selected."),()=>{};const f=new r.WebGLRenderer({antialias:!0,alpha:!0});f.setPixelRatio(window.devicePixelRatio||1),f.setSize(p.clientWidth,p.clientHeight||320),f.outputEncoding=r.sRGBEncoding,f.toneMapping=r.ACESFilmicToneMapping,p.appendChild(f.domElement);const x=new r.Scene;x.background=new r.Color(725536);const E=new r.PerspectiveCamera(50,p.clientWidth/Math.max(p.clientHeight,1),.1,5e3);E.position.set(0,0,30),x.add(new r.AmbientLight(16777215,.6));const S=new r.DirectionalLight(16777215,1.15);S.position.set(28,22,24),S.castShadow=!0,x.add(S);const L=new r.DirectionalLight(8246268,.6);let M;L.position.set(-16,-10,-22),x.add(L);let T=!1,C={x:0,y:0},P=30,F=4,N=200;const k=new r.LoadingManager,O=new n(k);k.onStart=()=>{h?.classList.remove("is-hidden"),g("Loading 3D modelâ€¦")},k.onError=e=>{g("Could not load 3D model. Check console for details."),console.error("[thirty-three] LoadingManager error",e)};const j=e=>{e.rotation.set(y.x,y.y,y.z),e.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=e.material.clone(),e.material.color=new r.Color(b))})},R=()=>{f.render(x,E)},D=()=>{if(!c)return;if(!M)return;const e=r.MathUtils.radToDeg(M.rotation.x),t=r.MathUtils.radToDeg(M.rotation.y),o=r.MathUtils.radToDeg(M.rotation.z),{x:n,y:i,z:a}=M.position;console.clear(),console.log(`Position X: ${n.toFixed(2)}`),console.log(`Position Y: ${i.toFixed(2)}`),console.log(`Position Z: ${a.toFixed(2)}`),console.log(`Rotation X: ${e.toFixed(2)} degrees`),console.log(`Rotation Y: ${t.toFixed(2)} degrees`),console.log(`Rotation Z: ${o.toFixed(2)} degrees`),console.log(`Scale: ${M.scale.x.toFixed(2)}`),console.log(`Camera Distance: ${P.toFixed(2)}`)},z=e=>{T=!0,C={x:e.clientX,y:e.clientY}},A=()=>{T=!1},$=e=>{if(!T||!M)return;const t=e.clientX-C.x,o=e.clientY-C.y;M.rotation.y+=.01*t,M.rotation.x+=.01*o,C={x:e.clientX,y:e.clientY},R(),D()},Y=e=>{if(!M)return;e.preventDefault();const t=e.deltaY>0?1:-1;P*=t>0?1.08:.92,P=s(P,F,N),E.position.set(0,0,P),R(),D()},H=()=>{const e=p.clientWidth||1,t=p.clientHeight||1;f.setSize(e,t),E.aspect=e/t,E.updateProjectionMatrix(),R()};return i&&(p.addEventListener("pointerdown",z),window.addEventListener("pointerup",A),window.addEventListener("pointermove",$),p.addEventListener("wheel",Y,{passive:!1})),window.addEventListener("resize",H),f.setAnimationLoop(R),m?O.load(m,e=>{g("3D model ready"),h?.classList.add("is-hidden"),M&&x.remove(M),M=e,j(M),(e=>{const t=e.scale.clone();e.scale.setScalar(1);const o=(new r.Box3).setFromObject(e),n=o.getCenter(new r.Vector3);e.position.sub(n);const i=o.getSize(new r.Vector3),a=(Math.max(i.x,i.y,i.z)||1)/(2*Math.tan(r.MathUtils.degToRad(.5*E.fov)));P=Math.max(1.4*a,6),F=Math.max(.25*P,2),N=Math.max(8*P,50),E.position.set(0,0,P),E.lookAt(0,0,0),e.scale.copy(t)})(M),M.scale.setScalar(w),x.add(M),R(),D()},void 0,e=>{g("Could not load 3D model. Check console for details."),h?.classList.remove("is-hidden"),console.error("[thirty-three] 3MFLoader error",e)}):g("No 3MF file selected."),H(),{destroy:()=>{i&&(p.removeEventListener("pointerdown",z),window.removeEventListener("pointerup",A),window.removeEventListener("pointermove",$),p.removeEventListener("wheel",Y)),window.removeEventListener("resize",H),f.setAnimationLoop(null),f.dispose(),f.domElement?.parentNode===p&&p.removeChild(f.domElement)},update:(e={})=>{Object.prototype.hasOwnProperty.call(e,"scale")&&(w=s(Number(e.scale)||1,.01,2)),Object.prototype.hasOwnProperty.call(e,"rotationX")&&(y.x=a(Number(e.rotationX)||0,r)),Object.prototype.hasOwnProperty.call(e,"rotationY")&&(y.y=a(Number(e.rotationY)||0,r)),Object.prototype.hasOwnProperty.call(e,"rotationZ")&&(y.z=a(Number(e.rotationZ)||0,r)),Object.prototype.hasOwnProperty.call(e,"color")&&(b=l(e.color)),M&&(j(M),M.scale.setScalar(w),R(),D())}}})(e,await(i||(i=(async()=>{const e=window.THREE||await n.e(437).then(n.bind(n,437)),t=e.default||e,o=await Promise.all([n.e(437),n.e(462)]).then(n.bind(n,462)),r=o.ThreeMFLoader||o.default||o;return window.THREE||(window.THREE=t),{THREE:t,ThreeMFLoader:r}})(),i)),t)};console.info("[thirty-three] view.js evaluated");const d=()=>{document.querySelectorAll(".wp-block-create-block-thirty-three, .thirty-three-block").forEach(e=>{c(e).catch(e=>{console.error("[thirty-three] Failed to mount viewer",e)})})};"loading"===document.readyState?window.addEventListener("DOMContentLoaded",d):d()})();